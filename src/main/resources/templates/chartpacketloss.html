<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="ISO-8859-1">
<!--    <meta name="viewport" content="width=device-width, initial-scale=1.0">-->
    <title>History 3D Chart</title>
    <script src="https://cdn.anychart.com/releases/8.10.0/js/anychart-bundle.min.js"></script>
    <link rel="stylesheet"
          href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css"
          integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO"
          crossorigin="anonymous">
</head>
<body>
<header th:replace="~{fragments/header-simple :: header}"></header>
<main>

    <div th:if="${domain != null}" class="col-md-12">
        <div style="height: 5px;"></div>
        <div th:if="${data3g != null && !data3g.isEmpty()}" style="display: flex; flex-direction: row; align-items: center; justify-content: center;">
            <div id="packets3g" style="width: 90%; height: 400px;"></div>
        </div>
        <div th:if="${data2g != null && !data2g.isEmpty()}" style="display: flex; flex-direction: row; align-items: center; justify-content: center;">
            <div id="packets2g" style="width: 90%; height: 400px;"></div>
        </div>
    </div>

<!-- Inject chart data from backend -->
<script th:inline="javascript">
    anychart.onDocumentReady(function () {
        // const rawData3g = [{"x":"2025-04-15T22:00","category":"KOPIS1","value":0.0},{"x":"2025-04-15T23:00","category":"KOPIS1","value":0.0},{"x":"2025-04-16T00:00","category":"KOPIS1","value":0.0},{"x":"2025-04-16T01:00","category":"KOPIS1","value":0.0},{"x":"2025-04-16T02:00","category":"KOPIS1","value":0.0},{"x":"2025-04-16T03:00","category":"KOPIS1","value":0.0},{"x":"2025-04-16T04:00","category":"KOPIS1","value":0.0},{"x":"2025-04-16T05:00","category":"KOPIS1","value":0.0},{"x":"2025-04-16T06:00","category":"KOPIS1","value":0.0},{"x":"2025-04-16T07:00","category":"KOPIS1","value":0.0},{"x":"2025-04-16T08:00","category":"KOPIS1","value":0.0},{"x":"2025-04-16T09:00","category":"KOPIS1","value":0.0},{"x":"2025-04-16T10:00","category":"KOPIS1","value":0.0},{"x":"2025-04-16T11:00","category":"KOPIS1","value":0.0},{"x":"2025-04-16T12:00","category":"KOPIS1","value":0.0},{"x":"2025-04-16T13:00","category":"KOPIS1","value":0.0},{"x":"2025-04-16T14:00","category":"KOPIS1","value":0.0},{"x":"2025-04-16T15:00","category":"KOPIS1","value":0.0},{"x":"2025-04-16T16:00","category":"KOPIS1","value":0.0},{"x":"2025-04-16T17:00","category":"KOPIS1","value":0.0},{"x":"2025-04-16T18:00","category":"KOPIS1","value":0.0},{"x":"2025-04-16T19:00","category":"KOPIS1","value":0.0},{"x":"2025-04-16T20:00","category":"KOPIS1","value":0.0},{"x":"2025-04-16T21:00","category":"KOPIS1","value":0.0},{"x":"2025-04-16T22:00","category":"KOPIS1","value":0.0},{"x":"2025-04-16T23:00","category":"KOPIS1","value":0.0},{"x":"2025-04-17T00:00","category":"KOPIS1","value":0.0},{"x":"2025-04-17T01:00","category":"KOPIS1","value":0.0},{"x":"2025-04-17T02:00","category":"KOPIS1","value":0.0},{"x":"2025-04-17T03:00","category":"KOPIS1","value":0.0},{"x":"2025-04-17T04:00","category":"KOPIS1","value":0.0},{"x":"2025-04-17T05:00","category":"KOPIS1","value":0.0},{"x":"2025-04-17T06:00","category":"KOPIS1","value":0.0},{"x":"2025-04-17T07:00","category":"KOPIS1","value":0.0},{"x":"2025-04-17T08:00","category":"KOPIS1","value":0.0},{"x":"2025-04-17T09:00","category":"KOPIS1","value":0.0},{"x":"2025-04-17T10:00","category":"KOPIS1","value":0.0},{"x":"2025-04-17T11:00","category":"KOPIS1","value":0.0},{"x":"2025-04-17T12:00","category":"KOPIS1","value":0.188325},{"x":"2025-04-17T13:00","category":"KOPIS1","value":0.5},{"x":"2025-04-17T14:00","category":"KOPIS1","value":0.5},{"x":"2025-04-17T15:00","category":"KOPIS1","value":0.5},{"x":"2025-04-17T16:00","category":"KOPIS1","value":0.5},{"x":"2025-04-17T17:00","category":"KOPIS1","value":0.5},{"x":"2025-04-17T18:00","category":"KOPIS1","value":0.5},{"x":"2025-04-17T19:00","category":"KOPIS1","value":0.5},{"x":"2025-04-17T20:00","category":"KOPIS1","value":0.5},{"x":"2025-04-17T21:00","category":"KOPIS1","value":0.5},{"x":"2025-04-17T22:00","category":"KOPIS1","value":0.5},{"x":"2025-04-17T23:00","category":"KOPIS1","value":0.5},{"x":"2025-04-18T00:00","category":"KOPIS1","value":0.5},{"x":"2025-04-18T01:00","category":"KOPIS1","value":0.5},{"x":"2025-04-18T02:00","category":"KOPIS1","value":0.5},{"x":"2025-04-18T03:00","category":"KOPIS1","value":0.5},{"x":"2025-04-18T04:00","category":"KOPIS1","value":0.5},{"x":"2025-04-18T05:00","category":"KOPIS1","value":0.5},{"x":"2025-04-18T06:00","category":"KOPIS1","value":0.5},{"x":"2025-04-18T07:00","category":"KOPIS1","value":0.5},{"x":"2025-04-18T08:00","category":"KOPIS1","value":0.5},{"x":"2025-04-18T09:00","category":"KOPIS1","value":0.5},{"x":"2025-04-18T10:00","category":"KOPIS1","value":0.5},{"x":"2025-04-18T11:00","category":"KOPIS1","value":0.5},{"x":"2025-04-18T12:00","category":"KOPIS1","value":0.5},{"x":"2025-04-18T13:00","category":"KOPIS1","value":0.0},{"x":"2025-04-18T14:00","category":"KOPIS1","value":0.0},{"x":"2025-04-18T15:00","category":"KOPIS1","value":0.0},{"x":"2025-04-18T16:00","category":"KOPIS1","value":0.0},{"x":"2025-04-18T17:00","category":"KOPIS1","value":0.0},{"x":"2025-04-18T18:00","category":"KOPIS1","value":0.0},{"x":"2025-04-18T19:00","category":"KOPIS1","value":0.0},{"x":"2025-04-18T20:00","category":"KOPIS1","value":0.0},{"x":"2025-04-18T21:00","category":"KOPIS1","value":0.0},{"x":"2025-04-18T22:00","category":"KOPIS1","value":0.0},{"x":"2025-04-18T23:00","category":"KOPIS1","value":0.0},{"x":"2025-04-19T00:00","category":"KOPIS1","value":0.0},{"x":"2025-04-19T01:00","category":"KOPIS1","value":0.0},{"x":"2025-04-19T02:00","category":"KOPIS1","value":0.0},{"x":"2025-04-19T03:00","category":"KOPIS1","value":0.0},{"x":"2025-04-19T04:00","category":"KOPIS1","value":0.0},{"x":"2025-04-19T05:00","category":"KOPIS1","value":0.0},{"x":"2025-04-19T06:00","category":"KOPIS1","value":0.0},{"x":"2025-04-19T07:00","category":"KOPIS1","value":0.0},{"x":"2025-04-19T08:00","category":"KOPIS1","value":0.0},{"x":"2025-04-19T09:00","category":"KOPIS1","value":0.0},{"x":"2025-04-19T10:00","category":"KOPIS1","value":0.0},{"x":"2025-04-19T11:00","category":"KOPIS1","value":0.0},{"x":"2025-04-19T12:00","category":"KOPIS1","value":0.0},{"x":"2025-04-19T13:00","category":"KOPIS1","value":0.0},{"x":"2025-04-19T14:00","category":"KOPIS1","value":0.0},{"x":"2025-04-19T15:00","category":"KOPIS1","value":0.0},{"x":"2025-04-19T16:00","category":"KOPIS1","value":0.0},{"x":"2025-04-19T17:00","category":"KOPIS1","value":0.0},{"x":"2025-04-19T18:00","category":"KOPIS1","value":0.0},{"x":"2025-04-19T19:00","category":"KOPIS1","value":0.0},{"x":"2025-04-19T20:00","category":"KOPIS1","value":0.0},{"x":"2025-04-19T21:00","category":"KOPIS1","value":0.0},{"x":"2025-04-19T22:00","category":"KOPIS1","value":0.0},{"x":"2025-04-19T23:00","category":"KOPIS1","value":0.0},{"x":"2025-04-20T00:00","category":"KOPIS1","value":0.0},{"x":"2025-04-20T01:00","category":"KOPIS1","value":0.0},{"x":"2025-04-20T02:00","category":"KOPIS1","value":0.0},{"x":"2025-04-20T03:00","category":"KOPIS1","value":0.0},{"x":"2025-04-20T04:00","category":"KOPIS1","value":0.0},{"x":"2025-04-20T05:00","category":"KOPIS1","value":0.0},{"x":"2025-04-20T06:00","category":"KOPIS1","value":0.0},{"x":"2025-04-20T07:00","category":"KOPIS1","value":0.0},{"x":"2025-04-20T08:00","category":"KOPIS1","value":0.0},{"x":"2025-04-20T09:00","category":"KOPIS1","value":0.0},{"x":"2025-04-20T10:00","category":"KOPIS1","value":0.0},{"x":"2025-04-20T11:00","category":"KOPIS1","value":0.0},{"x":"2025-04-20T12:00","category":"KOPIS1","value":0.0},{"x":"2025-04-20T13:00","category":"KOPIS1","value":0.0},{"x":"2025-04-20T14:00","category":"KOPIS1","value":0.0},{"x":"2025-04-20T15:00","category":"KOPIS1","value":0.0},{"x":"2025-04-20T16:00","category":"KOPIS1","value":0.0},{"x":"2025-04-20T17:00","category":"KOPIS1","value":0.0},{"x":"2025-04-20T18:00","category":"KOPIS1","value":0.0},{"x":"2025-04-20T19:00","category":"KOPIS1","value":0.0},{"x":"2025-04-20T20:00","category":"KOPIS1","value":0.0},{"x":"2025-04-20T21:00","category":"KOPIS1","value":0.0},{"x":"2025-04-20T22:00","category":"KOPIS1","value":0.0},{"x":"2025-04-20T23:00","category":"KOPIS1","value":0.0},{"x":"2025-04-21T00:00","category":"KOPIS1","value":0.0},{"x":"2025-04-21T01:00","category":"KOPIS1","value":0.0},{"x":"2025-04-21T02:00","category":"KOPIS1","value":0.0},{"x":"2025-04-21T03:00","category":"KOPIS1","value":0.0},{"x":"2025-04-21T04:00","category":"KOPIS1","value":0.0},{"x":"2025-04-21T05:00","category":"KOPIS1","value":0.0},{"x":"2025-04-21T06:00","category":"KOPIS1","value":0.0},{"x":"2025-04-21T07:00","category":"KOPIS1","value":0.0},{"x":"2025-04-21T08:00","category":"KOPIS1","value":0.0},{"x":"2025-04-21T09:00","category":"KOPIS1","value":0.0},{"x":"2025-04-21T10:00","category":"KOPIS1","value":0.0},{"x":"2025-04-21T11:00","category":"KOPIS1","value":0.0},{"x":"2025-04-21T12:00","category":"KOPIS1","value":0.0},{"x":"2025-04-21T13:00","category":"KOPIS1","value":0.0},{"x":"2025-04-21T14:00","category":"KOPIS1","value":0.0},{"x":"2025-04-21T15:00","category":"KOPIS1","value":0.0},{"x":"2025-04-21T16:00","category":"KOPIS1","value":0.0},{"x":"2025-04-21T17:00","category":"KOPIS1","value":0.0},{"x":"2025-04-21T18:00","category":"KOPIS1","value":0.0},{"x":"2025-04-21T19:00","category":"KOPIS1","value":0.0},{"x":"2025-04-21T20:00","category":"KOPIS1","value":0.0},{"x":"2025-04-21T21:00","category":"KOPIS1","value":0.0},{"x":"2025-04-21T22:00","category":"KOPIS1","value":0.0},{"x":"2025-04-21T23:00","category":"KOPIS1","value":0.0},{"x":"2025-04-22T00:00","category":"KOPIS1","value":0.0},{"x":"2025-04-22T01:00","category":"KOPIS1","value":0.0},{"x":"2025-04-22T02:00","category":"KOPIS1","value":0.0},{"x":"2025-04-22T03:00","category":"KOPIS1","value":0.0},{"x":"2025-04-22T04:00","category":"KOPIS1","value":0.0},{"x":"2025-04-22T05:00","category":"KOPIS1","value":0.0},{"x":"2025-04-22T06:00","category":"KOPIS1","value":0.0},{"x":"2025-04-22T07:00","category":"KOPIS1","value":0.0},{"x":"2025-04-22T08:00","category":"KOPIS1","value":0.0},{"x":"2025-04-22T09:00","category":"KOPIS1","value":0.0},{"x":"2025-04-22T10:00","category":"KOPIS1","value":0.0},{"x":"2025-04-22T11:00","category":"KOPIS1","value":0.0},{"x":"2025-04-22T12:00","category":"KOPIS1","value":0.0},{"x":"2025-04-22T13:00","category":"KOPIS1","value":0.0},{"x":"2025-04-22T14:00","category":"KOPIS1","value":0.0},{"x":"2025-04-22T15:00","category":"KOPIS1","value":0.0},{"x":"2025-04-22T16:00","category":"KOPIS1","value":0.0},{"x":"2025-04-22T17:00","category":"KOPIS1","value":0.0},{"x":"2025-04-22T18:00","category":"KOPIS1","value":0.0},{"x":"2025-04-22T19:00","category":"KOPIS1","value":0.0},{"x":"2025-04-22T20:00","category":"KOPIS1","value":0.0},{"x":"2025-04-22T21:00","category":"KOPIS1","value":0.0},{"x":"2025-04-15T22:00","category":"KOPIS2","value":0.0},{"x":"2025-04-15T23:00","category":"KOPIS2","value":0.0},{"x":"2025-04-16T00:00","category":"KOPIS2","value":0.0},{"x":"2025-04-16T01:00","category":"KOPIS2","value":0.0},{"x":"2025-04-16T02:00","category":"KOPIS2","value":0.0},{"x":"2025-04-16T03:00","category":"KOPIS2","value":0.0}]
        // const rawData2g = [{"x":"2025-04-15T22:00","category":"KOPIS1","value":0.0},{"x":"2025-04-15T23:00","category":"KOPIS1","value":0.0},{"x":"2025-04-16T00:00","category":"KOPIS1","value":0.0},{"x":"2025-04-16T01:00","category":"KOPIS1","value":0.0},{"x":"2025-04-16T02:00","category":"KOPIS1","value":0.0},{"x":"2025-04-16T03:00","category":"KOPIS1","value":0.0},{"x":"2025-04-16T04:00","category":"KOPIS1","value":0.0},{"x":"2025-04-16T05:00","category":"KOPIS1","value":0.0},{"x":"2025-04-16T06:00","category":"KOPIS1","value":0.0},{"x":"2025-04-16T07:00","category":"KOPIS1","value":0.0},{"x":"2025-04-16T08:00","category":"KOPIS1","value":0.0},{"x":"2025-04-16T09:00","category":"KOPIS1","value":0.0},{"x":"2025-04-16T10:00","category":"KOPIS1","value":0.0},{"x":"2025-04-16T11:00","category":"KOPIS1","value":0.0},{"x":"2025-04-16T12:00","category":"KOPIS1","value":0.0},{"x":"2025-04-16T13:00","category":"KOPIS1","value":0.0},{"x":"2025-04-16T14:00","category":"KOPIS1","value":0.0},{"x":"2025-04-16T15:00","category":"KOPIS1","value":0.0},{"x":"2025-04-16T16:00","category":"KOPIS1","value":0.0},{"x":"2025-04-16T17:00","category":"KOPIS1","value":0.0},{"x":"2025-04-16T18:00","category":"KOPIS1","value":0.0},{"x":"2025-04-16T19:00","category":"KOPIS1","value":0.0},{"x":"2025-04-16T20:00","category":"KOPIS1","value":0.0},{"x":"2025-04-16T21:00","category":"KOPIS1","value":0.0},{"x":"2025-04-16T22:00","category":"KOPIS1","value":0.0},{"x":"2025-04-16T23:00","category":"KOPIS1","value":0.0},{"x":"2025-04-17T00:00","category":"KOPIS1","value":0.0},{"x":"2025-04-17T01:00","category":"KOPIS1","value":0.0},{"x":"2025-04-17T02:00","category":"KOPIS1","value":0.0},{"x":"2025-04-17T03:00","category":"KOPIS1","value":0.0},{"x":"2025-04-17T04:00","category":"KOPIS1","value":0.0},{"x":"2025-04-17T05:00","category":"KOPIS1","value":0.0},{"x":"2025-04-17T06:00","category":"KOPIS1","value":0.0},{"x":"2025-04-17T07:00","category":"KOPIS1","value":0.0},{"x":"2025-04-17T08:00","category":"KOPIS1","value":0.0},{"x":"2025-04-17T09:00","category":"KOPIS1","value":0.0},{"x":"2025-04-17T10:00","category":"KOPIS1","value":0.0},{"x":"2025-04-17T11:00","category":"KOPIS1","value":0.0},{"x":"2025-04-17T12:00","category":"KOPIS1","value":0.188325},{"x":"2025-04-17T13:00","category":"KOPIS1","value":0.5},{"x":"2025-04-17T14:00","category":"KOPIS1","value":0.5},{"x":"2025-04-17T15:00","category":"KOPIS1","value":0.5},{"x":"2025-04-17T16:00","category":"KOPIS1","value":0.5},{"x":"2025-04-17T17:00","category":"KOPIS1","value":0.5},{"x":"2025-04-17T18:00","category":"KOPIS1","value":0.5},{"x":"2025-04-17T19:00","category":"KOPIS1","value":0.5},{"x":"2025-04-17T20:00","category":"KOPIS1","value":0.5},{"x":"2025-04-17T21:00","category":"KOPIS1","value":0.5},{"x":"2025-04-17T22:00","category":"KOPIS1","value":0.5},{"x":"2025-04-17T23:00","category":"KOPIS1","value":0.5},{"x":"2025-04-18T00:00","category":"KOPIS1","value":0.5},{"x":"2025-04-18T01:00","category":"KOPIS1","value":0.5},{"x":"2025-04-18T02:00","category":"KOPIS1","value":0.5},{"x":"2025-04-18T03:00","category":"KOPIS1","value":0.5},{"x":"2025-04-18T04:00","category":"KOPIS1","value":0.5},{"x":"2025-04-18T05:00","category":"KOPIS1","value":0.5},{"x":"2025-04-18T06:00","category":"KOPIS1","value":0.5},{"x":"2025-04-18T07:00","category":"KOPIS1","value":0.5},{"x":"2025-04-18T08:00","category":"KOPIS1","value":0.5},{"x":"2025-04-18T09:00","category":"KOPIS1","value":0.5},{"x":"2025-04-18T10:00","category":"KOPIS1","value":0.5},{"x":"2025-04-18T11:00","category":"KOPIS1","value":0.5},{"x":"2025-04-18T12:00","category":"KOPIS1","value":0.5},{"x":"2025-04-18T13:00","category":"KOPIS1","value":0.0},{"x":"2025-04-18T14:00","category":"KOPIS1","value":0.0},{"x":"2025-04-18T15:00","category":"KOPIS1","value":0.0},{"x":"2025-04-18T16:00","category":"KOPIS1","value":0.0},{"x":"2025-04-18T17:00","category":"KOPIS1","value":0.0},{"x":"2025-04-18T18:00","category":"KOPIS1","value":0.0},{"x":"2025-04-18T19:00","category":"KOPIS1","value":0.0},{"x":"2025-04-18T20:00","category":"KOPIS1","value":0.0},{"x":"2025-04-18T21:00","category":"KOPIS1","value":0.0},{"x":"2025-04-18T22:00","category":"KOPIS1","value":0.0},{"x":"2025-04-18T23:00","category":"KOPIS1","value":0.0},{"x":"2025-04-19T00:00","category":"KOPIS1","value":0.0},{"x":"2025-04-19T01:00","category":"KOPIS1","value":0.0},{"x":"2025-04-19T02:00","category":"KOPIS1","value":0.0},{"x":"2025-04-19T03:00","category":"KOPIS1","value":0.0},{"x":"2025-04-19T04:00","category":"KOPIS1","value":0.0},{"x":"2025-04-19T05:00","category":"KOPIS1","value":0.0},{"x":"2025-04-19T06:00","category":"KOPIS1","value":0.0},{"x":"2025-04-19T07:00","category":"KOPIS1","value":0.0},{"x":"2025-04-19T08:00","category":"KOPIS1","value":0.0},{"x":"2025-04-19T09:00","category":"KOPIS1","value":0.0},{"x":"2025-04-19T10:00","category":"KOPIS1","value":0.0},{"x":"2025-04-19T11:00","category":"KOPIS1","value":0.0},{"x":"2025-04-19T12:00","category":"KOPIS1","value":0.0},{"x":"2025-04-19T13:00","category":"KOPIS1","value":0.0},{"x":"2025-04-19T14:00","category":"KOPIS1","value":0.0},{"x":"2025-04-19T15:00","category":"KOPIS1","value":0.0},{"x":"2025-04-19T16:00","category":"KOPIS1","value":0.0},{"x":"2025-04-19T17:00","category":"KOPIS1","value":0.0},{"x":"2025-04-19T18:00","category":"KOPIS1","value":0.0},{"x":"2025-04-19T19:00","category":"KOPIS1","value":0.0},{"x":"2025-04-19T20:00","category":"KOPIS1","value":0.0},{"x":"2025-04-19T21:00","category":"KOPIS1","value":0.0},{"x":"2025-04-19T22:00","category":"KOPIS1","value":0.0},{"x":"2025-04-19T23:00","category":"KOPIS1","value":0.0},{"x":"2025-04-20T00:00","category":"KOPIS1","value":0.0},{"x":"2025-04-20T01:00","category":"KOPIS1","value":0.0},{"x":"2025-04-20T02:00","category":"KOPIS1","value":0.0},{"x":"2025-04-20T03:00","category":"KOPIS1","value":0.0},{"x":"2025-04-20T04:00","category":"KOPIS1","value":0.0},{"x":"2025-04-20T05:00","category":"KOPIS1","value":0.0},{"x":"2025-04-20T06:00","category":"KOPIS1","value":0.0},{"x":"2025-04-20T07:00","category":"KOPIS1","value":0.0},{"x":"2025-04-20T08:00","category":"KOPIS1","value":0.0},{"x":"2025-04-20T09:00","category":"KOPIS1","value":0.0},{"x":"2025-04-20T10:00","category":"KOPIS1","value":0.0},{"x":"2025-04-20T11:00","category":"KOPIS1","value":0.0},{"x":"2025-04-20T12:00","category":"KOPIS1","value":0.0},{"x":"2025-04-20T13:00","category":"KOPIS1","value":0.0},{"x":"2025-04-20T14:00","category":"KOPIS1","value":0.0},{"x":"2025-04-20T15:00","category":"KOPIS1","value":0.0},{"x":"2025-04-20T16:00","category":"KOPIS1","value":0.0},{"x":"2025-04-20T17:00","category":"KOPIS1","value":0.0},{"x":"2025-04-20T18:00","category":"KOPIS1","value":0.0},{"x":"2025-04-20T19:00","category":"KOPIS1","value":0.0},{"x":"2025-04-20T20:00","category":"KOPIS1","value":0.0},{"x":"2025-04-20T21:00","category":"KOPIS1","value":0.0},{"x":"2025-04-20T22:00","category":"KOPIS1","value":0.0},{"x":"2025-04-20T23:00","category":"KOPIS1","value":0.0},{"x":"2025-04-21T00:00","category":"KOPIS1","value":0.0},{"x":"2025-04-21T01:00","category":"KOPIS1","value":0.0},{"x":"2025-04-21T02:00","category":"KOPIS1","value":0.0},{"x":"2025-04-21T03:00","category":"KOPIS1","value":0.0},{"x":"2025-04-21T04:00","category":"KOPIS1","value":0.0},{"x":"2025-04-21T05:00","category":"KOPIS1","value":0.0},{"x":"2025-04-21T06:00","category":"KOPIS1","value":0.0},{"x":"2025-04-21T07:00","category":"KOPIS1","value":0.0},{"x":"2025-04-21T08:00","category":"KOPIS1","value":0.0},{"x":"2025-04-21T09:00","category":"KOPIS1","value":0.0},{"x":"2025-04-21T10:00","category":"KOPIS1","value":0.0},{"x":"2025-04-21T11:00","category":"KOPIS1","value":0.0},{"x":"2025-04-21T12:00","category":"KOPIS1","value":0.0},{"x":"2025-04-21T13:00","category":"KOPIS1","value":0.0},{"x":"2025-04-21T14:00","category":"KOPIS1","value":0.0},{"x":"2025-04-21T15:00","category":"KOPIS1","value":0.0},{"x":"2025-04-21T16:00","category":"KOPIS1","value":0.0},{"x":"2025-04-21T17:00","category":"KOPIS1","value":0.0},{"x":"2025-04-21T18:00","category":"KOPIS1","value":0.0},{"x":"2025-04-21T19:00","category":"KOPIS1","value":0.0},{"x":"2025-04-21T20:00","category":"KOPIS1","value":0.0},{"x":"2025-04-21T21:00","category":"KOPIS1","value":0.0},{"x":"2025-04-21T22:00","category":"KOPIS1","value":0.0},{"x":"2025-04-21T23:00","category":"KOPIS1","value":0.0},{"x":"2025-04-22T00:00","category":"KOPIS1","value":0.0},{"x":"2025-04-22T01:00","category":"KOPIS1","value":0.0},{"x":"2025-04-22T02:00","category":"KOPIS1","value":0.0},{"x":"2025-04-22T03:00","category":"KOPIS1","value":0.0},{"x":"2025-04-22T04:00","category":"KOPIS1","value":0.0},{"x":"2025-04-22T05:00","category":"KOPIS1","value":0.0},{"x":"2025-04-22T06:00","category":"KOPIS1","value":0.0},{"x":"2025-04-22T07:00","category":"KOPIS1","value":0.0},{"x":"2025-04-22T08:00","category":"KOPIS1","value":0.0},{"x":"2025-04-22T09:00","category":"KOPIS1","value":0.0},{"x":"2025-04-22T10:00","category":"KOPIS1","value":0.0},{"x":"2025-04-22T11:00","category":"KOPIS1","value":0.0},{"x":"2025-04-22T12:00","category":"KOPIS1","value":0.0},{"x":"2025-04-22T13:00","category":"KOPIS1","value":0.0},{"x":"2025-04-22T14:00","category":"KOPIS1","value":0.0},{"x":"2025-04-22T15:00","category":"KOPIS1","value":0.0},{"x":"2025-04-22T16:00","category":"KOPIS1","value":0.0},{"x":"2025-04-22T17:00","category":"KOPIS1","value":0.0},{"x":"2025-04-22T18:00","category":"KOPIS1","value":0.0},{"x":"2025-04-22T19:00","category":"KOPIS1","value":0.0},{"x":"2025-04-22T20:00","category":"KOPIS1","value":0.0},{"x":"2025-04-22T21:00","category":"KOPIS1","value":0.0},{"x":"2025-04-15T22:00","category":"KOPIS2","value":0.0},{"x":"2025-04-15T23:00","category":"KOPIS2","value":0.0},{"x":"2025-04-16T00:00","category":"KOPIS2","value":0.0},{"x":"2025-04-16T01:00","category":"KOPIS2","value":0.0},{"x":"2025-04-16T02:00","category":"KOPIS2","value":0.0},{"x":"2025-04-16T03:00","category":"KOPIS2","value":0.0}]
        /*<![CDATA[*/
        const rawData3g = /*[[${data3g}]]*/ [];
        /*]]>*/

        /*<![CDATA[*/
        const rawData2g = /*[[${data2g}]]*/ [];
        /*]]>*/
        createChart("packets3g", rawData3g, "Packet Loss, 3G");
        createChart("packets2g", rawData2g, "Packet Loss, 2G");
    });

    document.getElementById("logToggle").addEventListener("change", function () {
        const useLog = this.checked;
        charts.forEach(chart => {
            if (useLog) {
                chart.yScale(anychart.scales.log());
            } else {
                chart.yScale(anychart.scales.linear());
            }
        });

    });

    let charts = []

    function createChart(containerId, data, title) {
        const timeZoneOffset = new Date().getTimezoneOffset();

        const chart = anychart.column3d();
        chart.container(containerId);

        chart.zDistribution(true);
        chart.zPadding(0.2);

        // Extract unique sites and times
        const sites = [...new Set(data.map(p => p.category))];
        const times = [...new Set(data.map(p => p.x))];

        // Build one series per site
        sites.forEach(site => {
            const siteSeriesData = times.map(time => {
                const match = data.find(p => p.category === site && p.x === time);
                return {x: time, value: match ? match.value * 100 : 0};
            });

            const series = chart.column(siteSeriesData).name(site);

            series.fill(function () {
                return this.value === 0 ? 'transparent' : this.sourceColor;
            });
        });

        chart.title(title);
        chart.xAxis().labels().rotation(-45).format(function () {
            return anychart.format.dateTime(this.value, "MM.dd HH:mm", timeZoneOffset)
        });
        // chart.yAxis().title("%");
        chart.yAxis().labels().format("{%value}%")
        // chart.yScale().maximum(100);
        chart.legend(true);

        chart.draw();
        charts.push(chart);
    }

</script>

</main>
<footer th:replace="~{fragments/footer :: footer}"></footer>
</body>
</html>